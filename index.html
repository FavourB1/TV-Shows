<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TV Shows Finder</title>
  <style>
    /* Retro Fantasy Theme Styles */
    body {
      font-family: 'Garamond', serif;
      background-color: #3b3a3a;
      color: #f8f1e5;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 600px;
      padding: 20px;
      background-color: #2d2c2c;
      border: 1px solid #8a7e72;
      border-radius: 8px;
      text-align: center;
    }

    h1 {
      color: #d4af37;
    }

    .show-info {
      margin: 20px 0;
      padding: 15px;
      background-color: #403d3d;
      border-radius: 5px;
    }

    .rating-buttons label {
      margin: 0 5px;
      color: #d4af37;
    }

    .button {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #8a7e72;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .button:hover {
      background-color: #a2907b;
    }

    .chart-container {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>TV Shows Finder</h1>
    <div class="show-info" id="show-info">
      <!-- TV show details will be displayed here -->
    </div>
    <div class="rating-buttons" id="rating-buttons">
      <!-- Rating buttons will be displayed here -->
    </div>
    <button class="button" id="skip-button">Skip</button>
    <div class="chart-container" id="chart-container" style="display: none;">
      <canvas id="genreChart" width="400" height="300"></canvas>
    </div>
  </div>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // Sample JSON data
    const tvShows = [
      { "title": "I Love Lucy", "author": "Desi Arnaz, Madelyn Pugh, Bob Carroll Jr.", "year": 1951, "genre": ["Sitcom", "Comedy"] },
      { "title": "The Twilight Zone", "author": "Rod Serling", "year": 1959, "genre": ["Sci-Fi", "Thriller"] },
       {"title": "Doctor Who", "author": "Sydney Newman", "year": 1963, "genre": ["Sci-Fi", "Adventure"]},
    {"title": "Star Trek", "author": "Gene Roddenberry", "year": 1966, "genre": ["Sci-Fi", "Adventure"]},
    {"title": "Monty Pythonâ€™s Flying Circus", "author": "Graham Chapman, John Cleese, Eric Idle", "year": 1969, "genre": ["Comedy", "Sketch"]},
    {"title": "All in the Family", "author": "Norman Lear", "year": 1971, "genre": ["Sitcom", "Comedy"]},
    {"title": "M*A*S*H", "author": "Larry Gelbart", "year": 1972, "genre": ["Comedy", "Drama"]},
    {"title": "Saturday Night Live", "author": "Lorne Michaels", "year": 1975, "genre": ["Comedy", "Variety"]},
    {"title": "Roots", "author": "Alex Haley", "year": 1977, "genre": ["Drama", "Historical"]},
    {"title": "Dallas", "author": "David Jacobs", "year": 1978, "genre": ["Drama"]},
    {"title": "The Simpsons", "author": "Matt Groening", "year": 1989, "genre": ["Animation", "Comedy"]},
    {"title": "Twin Peaks", "author": "David Lynch, Mark Frost", "year": 1990, "genre": ["Mystery", "Thriller"]},
    {"title": "The X-Files", "author": "Chris Carter", "year": 1993, "genre": ["Sci-Fi", "Mystery"]},
    {"title": "Friends", "author": "David Crane, Marta Kauffman", "year": 1994, "genre": ["Sitcom", "Comedy"]},
    {"title": "The West Wing", "author": "Aaron Sorkin", "year": 1999, "genre": ["Drama"]},
    {"title": "The Sopranos", "author": "David Chase", "year": 1999, "genre": ["Crime", "Drama"]},
    {"title": "Six Feet Under", "author": "Alan Ball", "year": 2001, "genre": ["Drama"]},
    {"title": "Lost", "author": "J.J. Abrams, Damon Lindelof", "year": 2004, "genre": ["Drama", "Adventure"]},
    {"title": "Battlestar Galactica", "author": "Ronald D. Moore", "year": 2004, "genre": ["Sci-Fi", "Drama"]},
    {"title": "Grey's Anatomy", "author": "Shonda Rhimes", "year": 2005, "genre": ["Drama", "Romance"]},
    {"title": "The Office", "author": "Greg Daniels", "year": 2005, "genre": ["Sitcom", "Comedy"]},
    {"title": "Breaking Bad", "author": "Vince Gilligan", "year": 2008, "genre": ["Crime", "Drama"]},
    {"title": "Mad Men", "author": "Matthew Weiner", "year": 2007, "genre": ["Drama"]},
    {"title": "Game of Thrones", "author": "David Benioff, D.B. Weiss", "year": 2011, "genre": ["Fantasy", "Drama"]},
    {"title": "The Walking Dead", "author": "Frank Darabont", "year": 2010, "genre": ["Horror", "Drama"]},
    {"title": "Sherlock", "author": "Mark Gatiss, Steven Moffat", "year": 2010, "genre": ["Crime", "Drama"]},
    {"title": "Fargo", "author": "Noah Hawley", "year": 2014, "genre": ["Crime", "Drama"]},
    {"title": "Better Call Saul", "author": "Vince Gilligan, Peter Gould", "year": 2015, "genre": ["Crime", "Drama"]},
    {"title": "The Handmaid's Tale", "author": "Bruce Miller", "year": 2017, "genre": ["Drama", "Sci-Fi"]},
    {"title": "Stranger Things", "author": "The Duffer Brothers", "year": 2016, "genre": ["Horror", "Drama"]},
    {"title": "Westworld", "author": "Jonathan Nolan, Lisa Joy", "year": 2016, "genre": ["Sci-Fi", "Drama"]},
    {"title": "Big Little Lies", "author": "David E. Kelley", "year": 2017, "genre": ["Drama", "Mystery"]},
    {"title": "The Marvelous Mrs. Maisel", "author": "Amy Sherman-Palladino", "year": 2017, "genre": ["Comedy", "Drama"]},
    {"title": "Mindhunter", "author": "Joe Penhall", "year": 2017, "genre": ["Crime", "Thriller"]},
    {"title": "The Good Place", "author": "Michael Schur", "year": 2016, "genre": ["Sitcom", "Fantasy"]},
    {"title": "Killing Eve", "author": "Phoebe Waller-Bridge", "year": 2018, "genre": ["Crime", "Thriller"]},
    {"title": "Bodyguard", "author": "Jed Mercurio", "year": 2018, "genre": ["Drama", "Thriller"]},
    {"title": "Chernobyl", "author": "Craig Mazin", "year": 2019, "genre": ["Drama", "Historical"]},
    {"title": "The Mandalorian", "author": "Jon Favreau", "year": 2019, "genre": ["Sci-Fi", "Adventure"]},
    {"title": "Euphoria", "author": "Sam Levinson", "year": 2019, "genre": ["Drama", "Teen"]},
    {"title": "Watchmen", "author": "Damon Lindelof", "year": 2019, "genre": ["Sci-Fi", "Drama"]},
    {"title": "Succession", "author": "Jesse Armstrong", "year": 2018, "genre": ["Drama"]},
    {"title": "The Witcher", "author": "Lauren Schmidt Hissrich", "year": 2019, "genre": ["Fantasy", "Drama"]},
    {"title": "Schitt's Creek", "author": "Eugene Levy, Daniel Levy", "year": 2015, "genre": ["Sitcom", "Comedy"]},
    {"title": "Ted Lasso", "author": "Jason Sudeikis, Bill Lawrence, Joe Kelly, Brendan Hunt", "year": 2020, "genre": ["Comedy", "Drama"]},
    {"title": "The Queen's Gambit", "author": "Scott Frank, Allan Scott", "year": 2020, "genre": ["Drama"]},
    {"title": "The Boys", "author": "Eric Kripke", "year": 2019, "genre": ["Sci-Fi", "Drama"]},
    {"title": "Fleabag", "author": "Phoebe Waller-Bridge", "year": 2016, "genre": ["Comedy", "Drama"]},
    {"title": "Lovecraft Country", "author": "Misha Green", "year": 2020, "genre": ["Drama", "Horror"]},
    {"title": "Ozark", "author": "Bill Dubuque, Mark Williams", "year": 2017, "genre": ["Crime", "Drama"]},
    {"title": "Squid Game", "author": "Hwang Dong-hyuk", "year": 2021, "genre": ["Drama", "Thriller"]}
]
    ];

    let currentShowIndex = 0;
    const selectedShows = tvShows.sort(() => 0.5 - Math.random()).slice(0, 15); // Randomly select 15 TV shows
    const genreRatings = {};

    // Display the current TV show
    function displayShow() {
      if (currentShowIndex >= selectedShows.length) {
        alert("You've rated all available shows!");
        showGenreChart();
        return;
      }

      const show = selectedShows[currentShowIndex];
      document.getElementById("show-info").innerHTML = `
        <h2>${show.title}</h2>
        <p><strong>Author:</strong> ${show.author}</p>
        <p><strong>Year:</strong> ${show.year}</p>
        <p><strong>Genre:</strong> ${show.genre.join(", ")}</p>
      `;

      document.getElementById("rating-buttons").innerHTML = `
        <label><input type="radio" name="rating" value="1"> 1</label>
        <label><input type="radio" name="rating" value="2"> 2</label>
        <label><input type="radio" name="rating" value="3"> 3</label>
        <label><input type="radio" name="rating" value="4"> 4</label>
        <label><input type="radio" name="rating" value="5"> 5</label>
        <label><input type="radio" name="rating" value="0"> Haven't watched</label>
      `;

      document.getElementById("rating-buttons").querySelectorAll("input").forEach(input => {
        input.addEventListener("change", handleRating);
      });
    }

    // Handle rating
    function handleRating(event) {
      const rating = parseInt(event.target.value, 10);
      const show = selectedShows[currentShowIndex];

      // If rated 3 or higher, update genre ratings
      if (rating >= 3) {
        show.genre.forEach(genre => {
          if (!genreRatings[genre]) {
            genreRatings[genre] = 0;
          }
          genreRatings[genre]++;
        });
      }

      // Move to the next show
      currentShowIndex++;
      displayShow();
    }

    // Skip current show
    document.getElementById("skip-button").addEventListener("click", () => {
      currentShowIndex++;
      displayShow();
    });

    // Show genre chart based on ratings
    function showGenreChart() {
      const ctx = document.getElementById('genreChart').getContext('2d');
      document.getElementById("chart-container").style.display = "block";

      const sortedGenres = Object.entries(genreRatings)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10); // Top 10 genres

      const labels = sortedGenres.map(item => item[0]);
      const data = sortedGenres.map(item => item[1]);

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Genre Ratings',
            data: data,
            backgroundColor: 'rgba(212, 175, 55, 0.7)',
            borderColor: '#d4af37',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }

    // Initialize the display with the first show
    displayShow();
  </script>

</body>
</html>
